---
layout: post
title: LCD Parallel Interface parameter calculations
date: '2019-03-11T13:16:00.000+05:30'
author: Gautam Bhat
tags: 
modified_time: '2019-03-11T13:17:01.468+05:30'
thumbnail: https://4.bp.blogspot.com/-qj9Ftanwt7k/WNZG1jNMwjI/AAAAAAAAAE0/F3mRlWgVn0UX02QmYkYBSiiTd3Wigl9mQCLcB/s72-c/lcd_display_properties.jpeg
blogger_id: tag:blogger.com,1999:blog-2655423030126048565.post-8522591885626458889
blogger_orig_url: https://thesoulofamachine.blogspot.com/2019/03/lcd-parallel-interface-parameter.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><span style="font-family: &quot;verdana&quot; , sans-serif;">In this post I would like to describe the different LCD parameters and their calculations.</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span><span style="font-family: &quot;verdana&quot; , sans-serif;">First we understand the LCD display parameters with the following diagram.</span><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-qj9Ftanwt7k/WNZG1jNMwjI/AAAAAAAAAE0/F3mRlWgVn0UX02QmYkYBSiiTd3Wigl9mQCLcB/s1600/lcd_display_properties.jpeg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="300" src="https://4.bp.blogspot.com/-qj9Ftanwt7k/WNZG1jNMwjI/AAAAAAAAAE0/F3mRlWgVn0UX02QmYkYBSiiTd3Wigl9mQCLcB/s400/lcd_display_properties.jpeg" width="500" /></a></div><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span><span style="font-family: &quot;verdana&quot; , sans-serif;">In the diagram we have the following terms:</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span><span style="font-family: &quot;verdana&quot; , sans-serif;">H-Sync: A horizontal synchronize pulse used to synchronize/signal the start of a scan line. Here a scan line means one row/line (of pixels) in the LCD. <span style="font-family: &quot;verdana&quot; , sans-serif;">The signal can be low or a hig<span style="font-family: &quot;verdana&quot; , sans-serif;">h pulse</span></span> of a certain duration determined by the setup time (Thsys) and hold time (Thsyh) of this pulse. It is usually mentioned in nano seconds which can also be converted to dotclks which I will come to later.<span style="font-family: &quot;verdana&quot; , sans-serif;"> </span></span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span><span style="font-family: &quot;verdana&quot; , sans-serif;">V-Sync: A veritical synchronize pulse used to synchronize/signal the start of each frame. Here the frame is inclusive of all the vertical and horizontal porches and the H-Sync pulse. <span style="font-family: &quot;verdana&quot; , sans-serif;">T</span>he signal <span style="font-family: &quot;verdana&quot; , sans-serif;">can be</span> a low or a high pulse of a certain duration determined by the setup (Tvsys) and hold time (Tvsyh) of this pulse.</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span><span style="font-family: &quot;verdana&quot; , sans-serif;">HBP and HFP: Horizontal back and front porches. It is used to "eat away" a certain set of pixel clocks before the active line starts and ends. The porch which is before the active line starts is called the <i>back </i>porch and the porch which is after the active line ends is called the <i>front </i>porch. Linux term is left_margin and right_margin for HBP and HFP respectively.</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span><span style="font-family: &quot;verdana&quot; , sans-serif;">VBP and VFP: Vertical back and from porches. It is used to "eat away" a certain set of lines before after the actual frame starts and ends. Again the porch which is before the active frame is called the <i>back </i>porch and the porch which is after the active frame ends is called the <i>front </i>porch. Linux term is upper_margin and lower_margin for VBP and VFP respectively.</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span><span style="font-family: &quot;verdana&quot; , sans-serif;">To illustrate the above concepts I will put some of the figures from datasheets</span><br /><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">The below example shows the HSYNC in relation to the active pixels, HBP, HFP and also the <span style="font-family: &quot;verdana&quot; , sans-serif;">DOTCLK</span>.</span><br /><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-SFQivurRfDw/WNfcySpiOkI/AAAAAAAAAFE/LZc_GpCN79Q44xod1BHJ4bBtrgvcCLGuQCLcB/s1600/hsync_hbp_hvp.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="180" src="https://4.bp.blogspot.com/-SFQivurRfDw/WNfcySpiOkI/AAAAAAAAAFE/LZc_GpCN79Q44xod1BHJ4bBtrgvcCLGuQCLcB/s640/hsync_hbp_hvp.png" width="550" /></a></div><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span><span style="font-family: &quot;verdana&quot; , sans-serif;"></span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><span style="font-family: &quot;verdana&quot; , sans-serif;">In the diagram above <span style="font-family: &quot;verdana&quot; , sans-serif;">you can see the H<span style="font-family: &quot;verdana&quot; , sans-serif;">SYNC <span style="font-family: &quot;verdana&quot; , sans-serif;">low pu<span style="font-family: &quot;verdana&quot; , sans-serif;">lse<span style="font-family: &quot;verdana&quot; , sans-serif;">. <span style="font-family: &quot;verdana&quot; , sans-serif;">The pixel data will<span style="font-family: &quot;verdana&quot; , sans-serif;"> keep sending dumm<span style="font-family: &quot;verdana&quot; , sans-serif;">y data <span style="font-family: &quot;verdana&quot; , sans-serif;">till the back porch ends<span style="font-family: &quot;verdana&quot; , sans-serif;"> <span style="font-family: &quot;verdana&quot; , sans-serif;">with <span style="font-family: &quot;verdana&quot; , sans-serif;">the cont<span style="font-family: &quot;verdana&quot; , sans-serif;">inuously ti</span></span></span></span></span></span></span></span></span></span></span></span></span></span>cking DOTCLK<span style="font-family: &quot;verdana&quot; , sans-serif;"> pr<span style="font-family: &quot;verdana&quot; , sans-serif;">ovi<span style="font-family: &quot;verdana&quot; , sans-serif;">ding the timing for the <span style="font-family: &quot;verdana&quot; , sans-serif;">HS<span style="font-family: &quot;verdana&quot; , sans-serif;">YNC, HBP<span style="font-family: &quot;verdana&quot; , sans-serif;">, actual p<span style="font-family: &quot;verdana&quot; , sans-serif;">ixel data and the HFP. <span style="font-family: &quot;verdana&quot; , sans-serif;">The HBP and HFP period should <span style="font-family: &quot;verdana&quot; , sans-serif;">be</span> a mu<span style="font-family: &quot;verdana&quot; , sans-serif;">ltiple<span style="font-family: &quot;verdana&quot; , sans-serif;"> of the DOTCLK per<span style="font-family: &quot;verdana&quot; , sans-serif;">iod.</span></span></span></span></span></span></span></span></span></span></span></span><br /><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">Another <span style="font-family: &quot;verdana&quot; , sans-serif;">timing diagram is from the <span style="font-family: &quot;verdana&quot; , sans-serif;">S<span style="font-family: &quot;verdana&quot; , sans-serif;">3C2440 data<span style="font-family: &quot;verdana&quot; , sans-serif;"> sheet.</span></span></span></span></span><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://1.bp.blogspot.com/-68UqYiGJyLk/WNgIKLTUJJI/AAAAAAAAAFk/4d_XTi3DlmEiztrxIAL1H_9zmm0Xvn-RACLcB/s1600/lcd_timing.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="450" src="https://1.bp.blogspot.com/-68UqYiGJyLk/WNgIKLTUJJI/AAAAAAAAAFk/4d_XTi3DlmEiztrxIAL1H_9zmm0Xvn-RACLcB/s400/lcd_timing.png" width="500" /></a></div><div class="separator" style="clear: both; text-align: center;"></div><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><span style="font-family: &quot;verdana&quot; , sans-serif;"><span style="font-family: &quot;verdana&quot; , sans-serif;"><span style="font-family: &quot;verdana&quot; , sans-serif;"><span style="font-family: &quot;verdana&quot; , sans-serif;"><span style="font-family: &quot;verdana&quot; , sans-serif;"><span style="font-family: &quot;verdana&quot; , sans-serif;"><span style="font-family: &quot;verdana&quot; , sans-serif;">Here <span style="font-family: &quot;verdana&quot; , sans-serif;">we</span> can see the interrupt f<span style="font-family: &quot;verdana&quot; , sans-serif;">or the <span style="font-family: &quot;verdana&quot; , sans-serif;">frame sync<span style="font-family: &quot;verdana&quot; , sans-serif;"> i.e. VSYNC<span style="font-family: &quot;verdana&quot; , sans-serif;"> which is INT_FrSync<span style="font-family: &quot;verdana&quot; , sans-serif;">. </span></span>Th<span style="font-family: &quot;verdana&quot; , sans-serif;">is interrupt is useful for the double buffering tech<span style="font-family: &quot;verdana&quot; , sans-serif;">nique where <span style="font-family: &quot;verdana&quot; , sans-serif;"><span style="font-family: &quot;verdana&quot; , sans-serif;">we</span></span></span></span></span></span> can <span style="font-family: &quot;verdana&quot; , sans-serif;">loa<span style="font-family: &quot;verdana&quot; , sans-serif;">d the image onto <span style="font-family: &quot;verdana&quot; , sans-serif;">an inactive frame</span> buffer<span style="font-family: &quot;verdana&quot; , sans-serif;"> <span style="font-family: &quot;verdana&quot; , sans-serif;">between the VSYNC<span style="font-family: &quot;verdana&quot; , sans-serif;">s. Wh<span style="font-family: &quot;verdana&quot; , sans-serif;">en <span style="font-family: &quot;verdana&quot; , sans-serif;">we</span> get the interrupt from the VSYNC <span style="font-family: &quot;verdana&quot; , sans-serif;">we</span> <span style="font-family: &quot;verdana&quot; , sans-serif;">can just change the pointer from the active framebuf<span style="font-family: &quot;verdana&quot; , sans-serif;">fer to the back buffer which becomes the active <span style="font-family: &quot;verdana&quot; , sans-serif;">framebuffer. <span style="font-family: &quot;verdana&quot; , sans-serif;">We can start loading the pr<span style="font-family: &quot;verdana&quot; , sans-serif;">evious framebuffer which <span style="font-family: &quot;verdana&quot; , sans-serif;">becomes inactive.</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> <br /><br /><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">As seen in the figure the VSYNC and the HSYNC rising edge of the pulse for the start of the frame coincide. In this case the VSYNC and the HSYNC are high pulses. In the figure the VSYNC pulse width is equal to a HSYNC clock period. The polarity of the SYNC pulses can be controlled in the LCDCON5 register. The DOTCLK polarity too can be controlled.</span><span style="font-family: &quot;verdana&quot; , sans-serif;">As per the figure we can get the follow formula for the Horizontal line time period:</span><br /><br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;"><pre style="line-height: 125%; margin: 0;">One horizontal line time period = HSYNC width + Horizontal Back porch width + Horizontal data time + Horizontal Front porch width<br /></pre></div><br />Also for the time for a single frame can be calculated as:<br /><!-- HTML generated using hilite.me --><br /><div style="background: #ffffff; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;"><pre style="line-height: 125%; margin: 0;">One frame time period = Vertical Sync pulse width + Vertical back porch + Complete frame time + Vertical back porch<br /></pre></div><br /><span style="font-family: &quot;verdana&quot; , sans-serif;">I will explain why porches are needed in the coming sections.</span><br /><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span><span style="font-family: &quot;verdana&quot; , sans-serif;"><br /></span></div>