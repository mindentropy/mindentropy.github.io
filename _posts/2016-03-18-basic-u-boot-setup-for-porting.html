---
layout: post
title: Basic u-boot setup for porting
date: '2016-03-18T23:10:00.001+05:30'
author: Gautam Bhat
tags: 
modified_time: '2016-03-18T23:10:08.689+05:30'
blogger_id: tag:blogger.com,1999:blog-2655423030126048565.post-7903223041289122524
blogger_orig_url: https://thesoulofamachine.blogspot.com/2016/03/basic-u-boot-setup-for-porting.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">I have been doing some work on u-boot porting and I felt that I should write a small step by step guide for my reference.<br /><br /><ol style="text-align: left;"><li>Pull the u-boot source from git repo.</li><li> Create a separate branch. In this way you are creating<br />&nbsp;&nbsp; isolating your changes to a separate branch. Once testing<br />&nbsp;&nbsp; is done and is stable you can merge to the main branch.<br />&nbsp;&nbsp; eg: git branch &lt;yourbranchname&gt;&nbsp;</li><li>Checkout to your branch.&nbsp;&nbsp; eg: git checkout &lt;yourbranchname&gt;&nbsp;</li><li>Now we are ready to port u-boot to the new board.&nbsp;</li><li>Create a folder called &lt;yourboardname&gt; in board/vendor/<br />&nbsp;&nbsp; eg: board/vendor/&lt;yourboardname&gt;</li><li>Populate this folder with Kconfig,Makefile,&lt;yourboardname&gt;.c, any lds (linker script files) at a minimum.<br />Modify Kconfig and Makefile accordingly. Any supporting files can be put in the above folder.&nbsp;</li><li> Create a configuration file in include/configs/&lt;yourboardname&gt;.h</li><li>Create a defconfig file in configs/&lt;yourboardname&gt;_defconfig</li><li>Edit arch/&lt;cpu_architecture&gt;/cpu/&lt;cpu_architecture_variant&gt;/&lt;cpu_vendor&gt;/Kconfig<br />&nbsp;&nbsp;&nbsp; eg: arch/arm/cpu/armv7/mx6/Kconfig&nbsp;</li><li>Create a section TARGET_&lt;yourboardname&gt;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;...&gt;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;...&gt;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &lt;...&gt;</li><li>&nbsp;At the end of the file add the source path.<br />&nbsp;eg: source "board/&lt;vendor&gt;/&lt;yourboardname&gt;/Kconfig"</li><li>&nbsp;Run<br />&nbsp;&nbsp;&nbsp; CROSS_COMPILE="&lt;yourcompilertoolchain&gt;" make distclean<br />&nbsp;&nbsp;&nbsp; CROSS_COMPILE="&lt;yourcompilertoolchain&gt;" make &lt;yourboardname&gt;_defconfig<br />&nbsp;&nbsp;&nbsp; CROSS_COMPILE="&lt;yourcompilertoolchain&gt;" make</li><li>&nbsp;To flash the board with your new u-boot do:<br />&nbsp;&nbsp;&nbsp; sudo dd if=u-boot.imx of=/dev/sdb bs=512 seek=2 conv=fsync</li></ol><br />If you have a board similar to already existing boards use the configurations present<br />in the already existing board to jump start your changes.<br /><br /><div class="_Tsf" style="text-align: center;"><b><i>No man should escape our universities without knowing how little he knows.</i></b></div><div class="_Tsf" style="text-align: center;"><div class="kno-ecr-pt kno-fb-ctx" data-ved="0ahUKEwizxsWi48rLAhURj44KHemTCtwQ3B0IlAEoADAT"><b><i>-J. Robert Oppenheimer</i></b></div><b><i>&nbsp;</i></b></div><br /><br /><br /><br /><br /></div>